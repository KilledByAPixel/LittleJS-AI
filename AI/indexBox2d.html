<!DOCTYPE html><head>
<title>LittleJS AI Starter Project</title>
<meta charset="utf-8">
</head><body style="background:#000">
<script src="https://cdn.jsdelivr.net/npm/littlejsengine@1.17.15/dist/littlejs.js"></script>
<script src="https://cdn.jsdelivr.net/npm/littlejsengine@1.17.15/dist/box2d.wasm.js"></script>
<script>
'use strict';

// engine settings, do not remove
debugWatermark = false; // Hide debug watermark in corner
showEngineVersion = false; // Hide engine version console display
paused = false; // Start unpaused

// engine settings, customize if necessary
gravity = vec2(0, 0); // No gravity by default
cameraPos = vec2(0, 0); // Camera centered at origin
cameraScale = 32; // Camera zoom, larger is more zoomed in

// AI can use this class to make sound effects
class SoundGenerator extends Sound 
{
    constructor(params = {})
    {
        const {
            volume = 1,        // Volume scale (percent)
            randomness = .05,  // How much to randomize frequency (percent Hz)
            frequency = 220,   // Frequency of sound (Hz)
            attack = 0,        // Attack time, how fast sound starts (seconds)
            release = .1,      // Release time, how fast sound fades out (seconds)
            shapeCurve = 1,    // Squarenes of wave (0=square, 1=normal, 2=pointy)
            slide = 0,         // How much to slide frequency (kHz/s)
            pitchJump = 0,     // Frequency of pitch jump (Hz)
            pitchJumpTime = 0, // Time of pitch jump (seconds)
            repeatTime = 0,    // Resets some parameters periodically (seconds)
            noise = 0,         // How much random noise to add (percent)
            bitCrush = 0,      // Resamples at a lower frequency in (samples*100)
            delay = 0,         // Overlap sound with itself for reverb and flanger effects (seconds)
        } = params;
        
        super([volume, randomness, frequency, attack, 0, release, 0, shapeCurve, slide, 0, pitchJump, pitchJumpTime, repeatTime, noise, 0, bitCrush, delay, 1, 0, 0, 0]);
    }
}

///////////////////////////////////////////////////////////////////////////////
// game stuff
let mouseJoint;
let groundObject;

///////////////////////////////////////////////////////////////////////////////
async function gameInit()
{
    // called once after the engine starts up
    // setup the game

    // setup box2d first!
    await box2dInit();
    
    // setup world
    canvasClearColor = hsl(0,0,.9);
    mouseJoint = 0;
    gravity.y = -50;
    
    // create ground object
    groundObject = new Box2dStaticObject(vec2(-8));
    groundObject.color = GRAY;
    groundObject.addBox(vec2(100,2));

    // add some random objects
    for (let i=50; i--;)
    {
        const pos = randInCircle(5);
        const color = randColor();
        const o = new Box2dObject(pos, vec2(), 0, 0, color);
        randInt(2) ? o.addCircle(rand(1,2)) : o.addRandomPoly(rand(1,2));
    }
}

///////////////////////////////////////////////////////////////////////////////
function gameUpdate()
{
    // called every frame at 60 frames per second
    // handle input and update the game state
    
    // mouse joint controls
    if (mouseJoint)
    {
        // update mouse joint
        mouseJoint.setTarget(mousePos);
        if (mouseWasReleased(0))
        {
            // release object
            mouseJoint = mouseJoint.destroy();
        }
    }
    else if (mouseWasPressed(0))
    {
        // grab object
        const object = box2d.pointCast(mousePos);
        if (object)
            mouseJoint = new Box2dTargetJoint(object,
                groundObject, mousePos);
    }
}

///////////////////////////////////////////////////////////////////////////////
function gameUpdatePost()
{
    // called after physics and objects are updated
    // setup camera and prepare for render
}

///////////////////////////////////////////////////////////////////////////////
function gameRender()
{
    // called before objects are rendered
    // draw any background effects that appear behind objects
}

///////////////////////////////////////////////////////////////////////////////
function gameRenderPost()
{
    // called after objects are rendered
    // draw effects or hud that appear above all objects
    
    // draw screen space text
    drawTextScreen(`Hello World!`, 
        vec2(mainCanvasSize.x/2, 70), 80,   // position, size
        hsl(0,0,1), 6, hsl(0,0,0));         // color, outline size and color

    // draw mouse joint
    mouseJoint && drawLine(mousePos, mouseJoint.getAnchorB(), .2, RED);
}

///////////////////////////////////////////////////////////////////////////////
// Startup LittleJS Engine
engineInit(gameInit, gameUpdate, gameUpdatePost, gameRender, gameRenderPost);

</script>